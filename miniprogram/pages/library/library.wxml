<!--pages/library/library.wxml-->
<view class="library-container">
  <!-- é¡¶éƒ¨æœç´¢æ  -->
  <view class="search-header">
    <view class="search-bar" bindtap="navigateToSearch">
      <text class="search-placeholder">ğŸ” æœç´¢è¿è¥èµ„æ–™...</text>
    </view>
  </view>

  <!-- åˆ†ç±»å¯¼èˆª -->
  <view class="category-nav">
    <scroll-view class="category-scroll" scroll-x="true">
      <view class="category-list">
        <view 
          class="category-item {{currentCategory === item.id ? 'active' : ''}}"
          wx:for="{{categories}}" 
          wx:key="id"
          bindtap="switchCategory"
          data-id="{{item.id}}"
        >
          <view class="category-icon">{{item.icon}}</view>
          <text class="category-name">{{item.name}}</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- çƒ­é—¨æ¨è -->
  <view class="section-header">
    <text class="section-title">ğŸ”¥ çƒ­é—¨æ¨è</text>
    <text class="section-more" bindtap="viewAllHot">æŸ¥çœ‹å…¨éƒ¨</text>
  </view>

  <view class="hot-resources">
    <view 
      class="resource-card hot-card"
      wx:for="{{hotResources}}" 
      wx:key="id"
      bindtap="viewResource"
      data-id="{{item.id}}"
    >
      <view class="resource-badge">çƒ­é—¨</view>
      <view class="resource-icon">{{item.icon}}</view>
      <view class="resource-info">
        <text class="resource-title">{{item.title}}</text>
        <text class="resource-desc">{{item.description}}</text>
        <view class="resource-meta">
          <text class="download-count">ğŸ“¥ {{item.downloads}}</text>
          <text class="resource-tag">{{item.tag}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åˆ†ç±»å†…å®¹ -->
  <view class="section-header">
    <text class="section-title">{{currentCategoryName}}</text>
    <text class="section-count">{{categoryResources.length}}ä¸ªèµ„æ–™</text>
  </view>

  <view class="resource-grid">
    <view 
      class="resource-item"
      wx:for="{{categoryResources}}" 
      wx:key="id"
      bindtap="viewResource"
      data-id="{{item.id}}"
    >
      <view class="resource-cover">
        <view class="resource-icon">{{item.icon}}</view>
        <view class="resource-type">{{item.type}}</view>
      </view>
      <view class="resource-content">
        <text class="resource-title">{{item.title}}</text>
        <text class="resource-desc">{{item.description}}</text>
        <view class="resource-footer">
          <text class="download-count">ğŸ“¥ {{item.downloads}}</text>
          <text class="resource-size">{{item.size}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="load-more" wx:if="{{hasMore}}" bindtap="loadMore">
    <text class="load-text">åŠ è½½æ›´å¤š</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{categoryResources.length === 0}}">
    <text class="empty-icon">ğŸ“š</text>
    <text class="empty-text">æš‚æ— èµ„æ–™</text>
    <text class="empty-desc">è¯¥åˆ†ç±»ä¸‹è¿˜æ²¡æœ‰èµ„æ–™ï¼Œæ•¬è¯·æœŸå¾…</text>
  </view>
</view>
